<!-----------显示选题----------->
<section class="de_topic_wrapper" >
    <div class="toolbar">
        <label>显示投稿箱:</label>
        <a href="" ng-class="{active:filterType==''}" ng-click="filterType=''">全部</a>
        <a href="" ng-class="{active:filterType=='open'}" ng-click="filterType='open'">开放中</a>
        <a href="" ng-class="{active:filterType=='closed'}" ng-click="filterType='closed'">已关闭</a>
        <a href="" ng-class="{active:filterType=='me'}" ng-click="filterType='me'">由我创建</a>
        <input  type="text" class="searchInput" ng-model="keyWord">
    </div>
    <!-- 选题列表 -->
    <ul class="de_topic_list">        
        <li class="de_topic_box" ng-repeat="box in boxes">
            <div class="user_info">
                <a ng-href="user/{{box.user.id}}" class="de_borderbox">
                    <img ng-src="{{box.user.setting.profile_image}}" class="photo">
                    <p class="name">{{box.user.fullname}}</p>
                </a>
            </div>
            <div class="topic_info">
                <p class="created_date">{{box.topic.created_at}} 创建</p>
                <a ng-href="box/{{box.topic.id}}">
                    <p class="topic_title">
                        征集：{{box.topic.name}}
                    </p>
                </a>
                <ul class="de_stats_tags">
                    <li class="uploads" title="上传">{{box.topic.artifact_count}}</li>
                </ul>
            </div>
            <ul class="topic_action">
                <!-- 根据权限控制 -->
                <li ng-show="box.topic.status==0" class="de_topic_action_submit"><a ng-href="upload/{{box.id}}" >投稿</a></li>
                <li ng-show="box.topic.status!=0" class="de_topic_action_view"><a ng-href="box/{{box.id}}" >查看</a></li>
                <li ng-show="box.user.id==currentUser.id||(currentUser.roles|arrayHasElement:'admin')"
                    ng-class="{de_topic_action_lock:box.topic.status==0,de_topic_action_unlock:box.topic.status!=0}">
                    <a href="" toggle-lock-box="{{box.topic.id}},{{box.topic.status}},{{$index}}">锁定</a></li>

                <li ng-show="box.user.id==currentUser.id||(currentUser.roles|arrayHasElement:'admin')" class="de_topic_action_setting">
                    <a ng-href="box/edit/{{box.topic.id}}" >设置</a></li>
            </ul>
            <ul class="project_info">
                <li class="de_borderbox" ng-repeat="project in box.artifacts">
                    <a href="" class="de_entity_link" ng-click="showProjectDetail(project.artifact.id)">
                        <img ng-src="{{project.artifact.profile_image}}">
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</section>